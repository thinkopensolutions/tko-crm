<?xml version="1.0"?>
<odoo>
    <data>
        <record id="crm_case_form_view_oppor" model="ir.ui.view" >
            <field name="name">CRM - Leads Form</field>
            <field name="model">crm.lead</field>
            <field name="inherit_id" ref="crm.crm_case_form_view_oppor"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="is_company" invisible="1"/>
                    <field name="partner_mobile" readonly="True" attrs="{'invisible' : [('is_company','=', True)]}"/>
                </xpath>
                <xpath expr="//field[@name='phone']" position="after">
                    <field name="poc_id" attrs="{'invisible' : [('is_company','=', False)]}" domain="[('is_company','=',False),('parent_id','=',partner_id)]"/>
                    <field name="poc_email" attrs="{'invisible' : [('poc_id','=', False)]}"/>
                    <field name="poc_mobile" attrs="{'invisible' : [('poc_id','=', False)]}"/>
                </xpath>
            </field>
        </record>

        <record id="crm_case_form_view_salesteams_opportunity_tko" model="ir.actions.act_window">
            <field name="name">My Pipeline</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">kanban,tree,graph,form,calendar,pivot</field>
            <field name="domain">[('type','=','opportunity')]</field>
            <field name="view_id" ref="crm.crm_case_kanban_view_leads"/>
            <field name="search_view_id" ref="crm.view_crm_case_opportunities_filter"/>
            <field name="context">{
                    'default_type': 'opportunity',
                    'default_user_id': uid,
                }
            </field>
            <field name="view_ids"
                   eval="[(5, 0, 0),
                          (0, 0, {'view_mode': 'kanban', 'view_id': ref('crm.crm_case_kanban_view_leads')}),
                          (0, 0, {'view_mode': 'tree', 'view_id': ref('crm.crm_case_tree_view_oppor')}),
                          (0, 0, {'view_mode': 'form', 'view_id': ref('crm.crm_case_form_view_oppor')}),
                          (0, 0, {'view_mode': 'calendar'}),
                          (0, 0, {'view_mode': 'pivot'}),
                          (0, 0, {'view_mode': 'graph'})]"/>
            <field name="search_view_id" ref="crm.view_crm_case_opportunities_filter"/>
            <field name="help" type="html">
                <p>
                    Odoo helps you keep track of your sales pipeline to follow
                    up potential sales and better forecast your future revenues.
                </p><p>
                    You will be able to plan meetings and log activities from
                    opportunities, convert them into quotations, attach related
                    documents, track all discussions, and much more.
                </p>
            </field>
        </record>
        <menuitem
            id="crm.menu_crm_opportunities"
            action="crm_case_form_view_salesteams_opportunity_tko"
            parent="sales_team.menu_sales"
            sequence="4"/>
    </data>
</odoo>